<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>信息采集任务发布页面</title>
    <link href="https://cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css" rel="stylesheet">
</head>

<body>
    {%include "header.html"%}
    <div class="jumbotron">
        <div class="container">
            <div class="panel panel-default">
                <!-- Default panel contents -->
                <div class="panel-heading">
                    <h3>发布信息采集任务</h3></div>
                <div class="panel-body">
                    <form action="/info/subscribe" method="POST" role="form">
                        <label>信息表名称</label>
                        <input type="text" name="info_name" class="form-control" placeholder="信息表名称" required="required">
                        <label>截止时间</label>
                        <input type="datetime-local" name="end_time" class="form-control" placeholder="2018-01-01 18:00" required="required">
                        <label>填写人数</label>
                        <input type="number" name="number" class="form-control" placeholder="96" required="required">
                        <legend>请编辑信息内容：</legend>
                        <tabel id="item_list">
                            <div id="item1">
                                <legend>信息1</legend>
                                <ul class="list-group">
                                    <li class="list-group-item">名称：
                                        <input type="text" name="item_name1" class="form-control" placeholder="家庭住址" required="required">
                                    </li>
                                    <li class="list-group-item">填写样例：
                                        <input type="text" name="item_demo1" class="form-control" placeholder="北京市海淀区农大南路8号" required="required">
                                    </li>
                                    <li class="list-group-item">填写要求及说明：
                                        <textarea name="item_request1" class="form-control" rows="3" placeholder="具体到街道以及门牌号" required="required"></textarea>
                                    </li>
                                </ul>
                            </div>
                        </tabel>
                        <button type="button" id="add_item" class="btn btn-primary">
                            <span class="glyphicon glyphicon-plus-sign"></span>
                        </button>
                        <button type="button" class="btn btn-danger" id="delete_item1" onclick="if(i>1){child=document.getElementById('item'+i).remove();i--;}">
                            <span class="glyphicon glyphicon-remove-sign"></span>
                        </button>
                        <script type="text/javascript">
                        var i = 1
                        </script>
                        <script src="https://cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
                        <script type="text/javascript">
                        $(function() {
                            $("#add_item").on("click", function() {
                                i++
                                var item = "<div id='item" + i + "'><legend>信息" + i + "</legend><ul class='list-group'><li class='list-group-item'>名称：<input type='text' name='item_name" + i + "' class='form-control' placeholder='家庭住址' required='required'></li><li class='list-group-item'>填写样例：        <input type='text' name='item_demo" + i + "' class='form-control' placeholder='北京市海淀区农大南路8号' required='required'></li><li class='list-group-item'>填写要求及说明：<textarea name='item_request" + i + "' class='form-control' rows='3' placeholder='具体到街道以及门牌号' required='required'></textarea></li></ul></div>"
                                $("#item_list").append(item);
                            })

                        });
                        </script>
                        <div class="pull-right">
                            <button type="submit" class="btn btn-primary">提交采集任务 </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="http://getbootstrap.com/assets/js/ie10-viewport-bug-workaround.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        $("#addTable").click(function() {

            var keyValue = "<label>信息名称：</label><input type='text' id='input' class='form-control'' value='' required='true' style='width:160px'/>  <label>信息要求：</label><input type='text' id='input' class='form-control' value='' required='true' >  <label>格式模板：</label><input type='text' id='input' class='form-control' value='' required='true'> "　　
            $("#table1").append(keyValue);　　
        });
        $("#deleteTable").click(function() {
            var check = document.getElementsByName("check");
            for (var i = 1; i <= check.length; i++) {
                if (check[i].checked) {
                    document.getElementById('table1').deleteRow(i);
                }
            }
        })
    })
    </script>
</body>

</html>